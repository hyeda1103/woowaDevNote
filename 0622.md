[← 뒤로](./README.md)

# 미니 리덕스 만들기

- 세미나 일자: 2021-06-22(화)
- 등장인물
    - 우아한 형제들 기술이사 김민태님👓
    - 아흔 아홉명의 교육생들🖐
        - 나🥎

## 우리의 대화
- 이날 나는 소리없이 강의를 들어야 했다(개인사정상)
    - 음소거로 봤으니 수업시간에 구현한 코드 이해는 내 몫이다
- 강의를 놓치기는 싫어서 핸드폰으로 줌을 슬쩍 켜놓고 노트북에는 코드샌드박스를 열어놓은 채 은밀히 코드를 따라 쳤다.
    - 🔗 [코드샌드박스 보러가기](https://codesandbox.io/embed/loving-mendel-j3fzm?fontsize=14&hidenavigation=1&theme=light)

### 미니 리덕스 만들기

```js
// index.js
function createStore(reducer, middleware = []) {
  let state = {};

  let dispatch = (action) => {
    reducer(action);
  };

  let backupDispatch = dispatch;

  middleware.reverse().forEach((m) => {
    backupDispatch = m(store)(backupDispatch);
  });

  const store = {
    getState: () => {},
    dispatch: backupDispatch
  };

  return store;
}

function reducer(action) {
  console.log(action);
}

const fetchUserInfo = (store) => (next) => (action) => {
  if (action.type === "fetch user info") {
    setTimeout(() => {
      next({
        type: "response user info"
      });
    }, 3000);
  } else {
    next(action);
  }
  console.log("logger B => ", action.type);
};

const store = createStore(reducer, [fetchUserInfo]);

store.dispatch({ type: "fetch posts" });
store.dispatch({ type: "fetch user info" });

/*
{type: "fetch posts"}
logger B =>  fetch posts 
logger B =>  fetch user info 
{type: "response user info"}
*/
```

